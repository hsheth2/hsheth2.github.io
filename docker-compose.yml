version: '2'

services:
  web:
    build: .
    restart: always
    labels:
      traefik.enable: true
      traefik.docker.network: "traefik"
      traefik.port: 80
      traefik.frontend.rule: Host:harshal.sheth.io
      traefik.frontend.headers.SSLRedirect: true
      traefik.frontend.headers.STSPreload: true
      traefik.frontend.headers.STSSeconds: 2628000
      traefik.frontend.headers.STSIncludeSubdomains: true
    networks:
      - traefik
      - default
  alternate:
    image: schmunk42/nginx-redirect
    restart: always
    environment:
      SERVER_REDIRECT: harshal.sheth.io
    labels:
      traefik.enable: true
      traefik.docker.network: "traefik"
      traefik.port: 80
      traefik.alt-com.frontend.rule: Host:harshalsheth.com,www.harshalsheth.com
      traefik.alt-me.frontend.rule: Host:harshalsheth.me,www.harshalsheth.me
      traefik.alt-tk.frontend.rule: Host:harshalsheth.tk,www.harshalsheth.tk
      traefik.frontend.headers.SSLRedirect: true
      traefik.frontend.headers.STSPreload: true
      traefik.frontend.headers.STSSeconds: 2628000
      traefik.frontend.headers.STSIncludeSubdomains: true
    networks:
      - traefik
      - default

networks:
  traefik:
    external: true
